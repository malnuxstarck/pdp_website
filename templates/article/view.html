{% extends "article/base.html" %}
{% load markup %}
{% load humane_date %}

{% block title %}
{{ article.title }} &ndash; Articles
{% endblock %}

{% block headline %}
{{ article.title }}<br />
<small>{{ article.description }}</small>
{% endblock %}

{% block breadcrumb %}
<li><a href="/">Accueil</a> <span class="divider">/</span></li>
<li><a href="/articles/">Articles</a> <span class="divider">/</span></li>
<li class="article">{{ article.title }}</li>
{% endblock %}

{% block content %}

{% ifequal user article.author %} 
<form action="{% url pdp.article.views.modify %}" method="POST">
    <a href="/articles/editer?article={{ article.pk }}" class="btn">
        <i class="icon-pencil"></i>
        Éditer l'article
    </a>

    <button type="submit" name="delete" class="btn">
        <i class="icon-remove"></i>
        Supprimer l'article
    </button>

    <input type="hidden" name="article" value="{{ article.pk }}" />
    {% csrf_token %}
</form>
{% endifequal %}
   
<p>
    Par
    <a href="{{ article.author.get_absolute_url }}">
        {{ article.author.username }}
    </a>
    {{ article.pubdate|humane_date }}.
</p>

{% if article.is_visible %}
    {% include "article/view_pager.html" %}
{% endif %}

{{ article.text|markdown:"safe,codehilite(force_linenos=True),extra" }}

<hr />

{% if article.is_visible %}
    {% include "article/view_pager.html" %}
{% else %}
    <p>
        Cet article n'a pas encore été mis en ligne.
    </p>
{% endif %}


{% endblock %}
